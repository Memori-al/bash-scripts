<hr>

# ğŸ‘ï¸â€ğŸ—¨ï¸ Overview
### ğŸ¯ ì œì‘ ëª©ì 
 * ì•ˆë…•í•˜ì„¸ìš”! ğŸ˜ƒ ì „ì£¼ëŒ€í•™êµ **19**í•™ë²ˆ **ì´ê°•ì¼**ì…ë‹ˆë‹¤.<br>
 ë¦¬ëˆ…ìŠ¤ë¥¼ ì–´ë ¤ì›Œí•˜ëŠ” ğŸŒ¿ë™ê¸° ë° í›„ë°°ë¶„ë“¤ì„ ìœ„í•´ ë³¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

 * ë³¸ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì „ì£¼ëŒ€í•™êµ ì„œë²„ê´€ë¦¬ ê¸°ë§ì‹œí—˜ì— ì‚¬ìš©ë˜ëŠ” ìë™í™” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

 * ë§¤ë…„ ì‹œí—˜ ë¬¸ì œê°€ ë°”ë€Œì–´ë„ ëŒ€ì‘í•  ìˆ˜ ìˆë„ë¡ ê° ìŠ¤í¬ë¦½íŠ¸ ë¶€ë¶„ì„ ëª¨ë“ˆí™”í•˜ì—¬ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

 * ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© ì‹œ ì„¤ì¹˜ ì‹œê°„ í¬í•¨ 30~40 ë¶„ ë‚´ì— ì‹œí—˜ì„ ëë§ˆì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> â„¹ï¸ í•´ë‹¹ ë¬¸ì„œëŠ” ë‹¤í¬ ëª¨ë“œğŸŒ™ì— ìµœì í™” ëœ ë¬¸ì„œì…ë‹ˆë‹¤.<br>&nbsp;&nbsp;ë¸Œë¼ìš°ì €ë¥¼ ë‹¤í¬ ëª¨ë“œğŸŒ™ë¡œ ì „í™˜ ì‹œ ë”ìš± ì›í™œí•˜ê²Œ ì½ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!

> â„¹ï¸ ë³¸ ê°€ì´ë“œëŠ” ë‹¤í¬ëª¨ë“œì— ìµœì í™” ë˜ì–´ìˆìŠµë‹ˆë‹¤.<br>
&nbsp;&nbsp;ë‹¤í¬ëª¨ë“œ ì„¤ì •ì„ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤.

 [![Up to Date](https://github.com/ikatyang/emoji-cheat-sheet/workflows/Up%20to%20Date/badge.svg)](https://github.com/Memori-al/bash-scripts)
<br> <hr>

### ğŸ“‘ êµ¬í˜„ ë°©ë²•
* ìˆ˜ì • ë° ì¶”ê°€ê°€ ìš©ì´í•œ ê³ ê°€ìš©ì„±(High Available) ì½”ë“œë¡œ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.
    - ìŠ¤í¬ë¦½íŠ¸ë¥¼ `íŠ¸ëŸ¬ë¸”ìŠˆíŒ…` ë° `ì˜ˆì™¸ì²˜ë¦¬`í•˜ê¸° ì‰½ë„ë¡ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.
<br><br>

* ì¸ê¸°ìˆëŠ” `Bash Scripts í‘œì¤€í™” ìŠ¤íƒ€ì¼`ë¡œ ì½”ë“œë¥¼ ë¦¬í„°ì¹˜ í–ˆìŠµë‹ˆë‹¤.
    - `Reference Data` **<1ë²ˆ>** ì°¸ì¡°
<br><br>

 * `ë³µì¡í•œ íŒŒë¼ë¯¸í„° ì „ë‹¬ ë°©ì‹`ì„ `ê°„ì†Œí™”`í•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ **ë³€ê²½**í•˜ì˜€ìŠµë‹ˆë‹¤. 


 * `íŒŒë¼ë¯¸í„° ì „ë‹¬ ë¶€ë¶„`ì€ `<settings.ini>` ì„¤ì • íŒŒì¼ë¡œ ëŒ€ì²´ë˜ì–´ ë™ì  ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
<br><hr>
### Â©ï¸ ì „ì ì„œëª…
    * Author    :   ì´ê°•ì¼
    * Contacts  :   lki_familiar@naver.com
    * Commit    :   23. 06. 19
    * Version   :   2.*
    * License   :   GPL

    * OS        :   Centos 7.*
    * Language  :   Bash Shell
    * Shebang   :   #!/bin/bash
    * Scripts   :   7
    * Indent    :   4
<hr>

# ğŸ“œ Contents
## ğŸ“– Theory
* [ì•„í‚¤í…ì²˜](#-architecture)
    * [ë„ì‹ë„](#-architecture-diagram)

## âš™ï¸ Command Table
* [ëª…ë ¹ì–´ í‘œ](#%EF%B8%8F-command-table-1)

## ğŸŒ± Configuration
* [settings.sh ì´ˆê¸° ì„¤ì • ë°©ë²•](#%EF%B8%8F-settingsini-ì„¤ì •)
    * [ì‚¬ìš©ì ì„¤ì •](#1-ì‚¬ìš©ì-ì„¤ì •)
    * [APM ì„¤ì •](#2-APM-ì„¤ì •)
    * [ë©”ì¼ ì„¤ì •](#3-ë©”ì¼-ì„¤ì •)
    * [IP ì„¤ì •](#4-IP-ì„¤ì •)
    * [DB ì„¤ì •](#5-DB-ì„¤ì •)
    * [ì •ë ¬ ì•Œê³ ë¦¬ì¦˜](#6-ì •ë ¬-ì•Œê³ ë¦¬ì¦˜-ì„¤ì •)
    * [(*ê°œë°œììš©) ìŠ¤í¬ë¦½íŠ¸ ëª¨ë“ˆ ì„¤ì •](#7--ê°œë°œììš©--ìŠ¤í¬ë¦½íŠ¸-ëª¨ë“ˆ-ì„¤ì •)

## ğŸ“ƒ Guide
* [ì‰˜ ì‚¬ìš© ê°€ì´ë“œ](#-guide-1)
    * [repo ëª…ë ¹ì–´](#1-repo-ëª…ë ¹ì–´)
    * [rpm ëª…ë ¹ì–´](#2-rpm-ëª…ë ¹ì–´)
    * [apm ëª…ë ¹ì–´](#3-apm-ëª…ë ¹ì–´)
        * split ëª…ë ¹ì–´
        * merge ëª…ë ¹ì–´
        * install ëª…ë ¹ì–´
        * check ëª…ë ¹ì–´
    * [quota ëª…ë ¹ì–´](#4-quota-ëª…ë ¹ì–´)
        * ì´ˆê¸° ì„¤ì •
        * install ëª…ë ¹ì–´
        * set ëª…ë ¹ì–´
    * [sendmail ëª…ë ¹ì–´](#5-sendmail-ëª…ë ¹ì–´)
        * install ëª…ë ¹ì–´
        * send ëª…ë ¹ì–´
    * [oracle ëª…ë ¹ì–´](#6-oracle-ëª…ë ¹ì–´)
        * install ëª…ë ¹ì–´
        * setdb ëª…ë ¹ì–´
        * back ëª…ë ¹ì–´
        * sql ëª…ë ¹ì–´
        * sort ëª…ë ¹ì–´

## ğŸ¤— Standardization
* [í‘œì¤€í™”](#-standardization-1)
    * [Function Renaming](#1-function-renaming-main)
    * [Exception & Error Handling](#2-exception--error-handling-main)
    * [HA Logging](#3-high-available-main)

## ğŸ”– Reference
* [Reference Link](#-reference-1)
   * Bash Style í‘œì¤€í™” ì§€ì¹¨ì„œ

<hr>

# ğŸ§± Architecture
<details>
<summary> View </summary>

## Â· Architecture Diagram 

AA : 
```mermaid
graph TD;
    sm_final.sh-->settings.sh-->;
    A-->C;
    B-->D;
    C-->D;
```
</details>

<br><hr>

# ğŸ·ï¸ Command Table
## ğŸ·ï¸ ëª…ë ¹ì–´ í…Œì´ë¸”
<details>
<summary> View </summary>

| Command | Parameters $1 | Parameters $2 | Description |
| :---: | :---: | :---: | :---: |
| `repo` | * | * | ë¡œì»¬ ì €ì¥ì†Œ 10ì´ˆ ë‚´ì— êµ¬ì„± |
| `rpm` | * | * | ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ëª©ë¡ ì €ì¥ |
| `apm` | install | * | APM ì„œë¹„ìŠ¤ ì„¤ì¹˜ |
| | split | * | MySQL ì†ŒìŠ¤ íŒŒì¼ ë‘ ê°œë¡œ ë¶„í•  |
| | merge | * | ë‘ ê°œë¡œ ë¶„í• í•œ MySQL ì†ŒìŠ¤ íŒŒì¼ ë³‘í•© |
| | check | * | APM ì„œë¹„ìŠ¤ ì¥ì•  ìœ ë¬´ í™•ì¸ |
| `quota` | install | * | Quota ì„œë¹„ìŠ¤ ì„¤ì¹˜ |
| | set | `/dev/sda3` | íŒŒë¼ë¯¸í„° $2 ê¸°ë°˜ìœ¼ë¡œ Quota ìë™ ì„¤ì • |
| `mail` | install | * | ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ëª©ë¡ ì €ì¥ |
| | send | local | <`settings.ini`> ì„¤ì • íŒŒì¼ <br>`root@localhost.localdomain` ê³„ì •ìœ¼ë¡œ TO = `lki_familiar@naver.com` ì£¼ì†Œë¡œ ì†¡ë¶€í•©ë‹ˆë‹¤. <br> 
| | send | global | <`settings.ini`> ì„¤ì • íŒŒì¼ <br>`luikie@luikie.sm.jj.ac.kr` ê³„ì •ìœ¼ë¡œ TO = `lki_familiar@naver.com` ì£¼ì†Œë¡œ ì†¡ë¶€í•©ë‹ˆë‹¤ |
| `oracle` | install | * | Oracle 21c **Preinstall** & <br> **EE ì„œë¹„ìŠ¤ ì„¤ì¹˜** ë° **DB ìƒì„±** |
| | setdb | * | <`settings.ini`> ì„¤ì • íŒŒì¼ <br>DB = linuxDB<br>TABLE = final_record<br> **DB ëª… ë³€ê²½** ë° **í…Œì´ë¸” ìƒì„±**|
| | back | * | **DB ì˜¤ë¥˜ ë°œìƒ** ì‹œ ì´ì „ ì„¤ì •ìœ¼ë¡œ **ë³µêµ¬** |
| | sql | * | **`<data.txt>`** ë°ì´í„° ë ˆì½”ë“œë¥¼ <br>**final_record** í…Œì´ë¸”ì— ìë™ ì‚½ì…<br>|
| | sort | * | **`<data.txt>`** ë°ì´í„° ë ˆì½”ë“œë¥¼<br>ì¡°ê±´ì— ë§ê²Œ ì •ë ¬ í›„ <br>**`<score_result.txt>`** íŒŒì¼ë¡œ ì €ì¥ |

</details>

<br><hr>

# âš™ï¸ Configuration

## ğŸ·ï¸ `<settings.ini>` ì„¤ì •
<details open>
<summary> View </summary>

<hr>

### 1. ì‚¬ìš©ì ì„¤ì •
<details>
<summary> View </summary>

```css
[USER DATA]
ID = 15
NICK = luikie
NAME = ì´ê°•ì¼
```
| í•„ë“œ | ê°’ | ì„¤ëª… |
| :---: | :---: | :---: |
|`ID`| 15 |ìˆ˜ì—…ë²ˆí˜¸ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
|`NICK`| luikie |ìˆ˜ì—…ë³„ì¹­ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
|`NAME`| ì´ê°•ì¼ |ë³¸ì¸ì˜ ì´ë¦„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
</details>

<hr>

### 2. APM ì„¤ì •
<details>
<summary> View </summary>

```css
[APM DATA]
FILES = xe.tar.gz
DIRECTORY = xe
```
| í•„ë“œ | ê°’ | ì„¤ëª… |
| :---: | :---: | :---: |
|`FILES`| xe.tar.gz |ì›¹ ì†ŒìŠ¤ íŒŒì¼ëª…
|`DIRECTORY`| xe |ì••ì¶• í•´ì œ í›„ ì €ì¥ë˜ëŠ” í´ë”ëª…
</details>

<hr>

### 3. ë©”ì¼ ì„¤ì •
<details>
<summary> View </summary>

```css
[MAIL DATA]
TO = ì´ë©”ì¼ ì£¼ì†Œ
```
| í•„ë“œ | ê°’ | ì„¤ëª… |
| :---: | :---: | :---: |
|`TO`| ì´ë©”ì¼ ì£¼ì†Œ | ì „ì†¡í•  ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥
</details>

<hr>

### 4. IP ì„¤ì •
<details>
<summary> View </summary>

```css
[IP DATA]
IP = ë³¸ì¸ ìë¦¬ì˜ ì•„ì´í”¼ ì£¼ì†Œ
```
| í•„ë“œ | ê°’ | ì„¤ëª… |
| :---: | :---: | :---: |
|`IP`| ë³¸ì¸ ìë¦¬ì˜ ì•„ì´í”¼ ì£¼ì†Œ | ì‹œí—˜ ìë¦¬ ì•„ì´í”¼ ì…ë ¥
</details>

<hr>

### 5. DB ì„¤ì •
<details>
<summary> View </summary>

```css
[ORACLE DATA]
DB = linuxDB
TABLE = final_record
```
| í•„ë“œ | ê°’ | ì„¤ëª… |
| :---: | :---: | :---: |
|`DB`| linuxDB | ë³€ê²½í•  DB ëª…
|`TABLE`| final_record | ìƒì„± Â· ì‚½ì…í•  TABLE ëª…
</details>

<hr>

### 6. ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ì„¤ì •
<details>
<summary> View </summary>

```css
[SORT DATA]
HEAD = 5
TAIL = 5
TYPE = 1
```
| í•„ë“œ | ê°’ | ì„¤ëª… |  | ì¡°ê±´ |
| :---: | :---: | :---: | :---: |:---: |
|`HEAD`| 5 | ìœ„ë¶€í„° ì•„ë˜ë¡œ 5 ë¼ì¸ ì„¤ì • ||
|`TAIL`| 5 | ì•„ë˜ë¶€í„° ìœ„ë¡œ 5 ë¼ì¸ ì„¤ì • || 
|`TYPE`| 0 | ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ìœ í˜• ||ìì‹ ì˜ ìœ„ì•„ë˜ 10ê°œ ë°ì´í„°ì˜ ìˆ˜ì—…ë²ˆí˜¸ê°€ í•œ ê°€ì§€ ì¡°ê±´ì¼ ë•Œ<br>1~10, 11~20, 21~30, 31~40 í•´ë‹¹
|| 1 | ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ìœ í˜• ||ìˆ˜ì—…ë²ˆí˜¸ 01âˆ¼10ë²ˆê¹Œì§€ëŠ” í•™ë…„ ìˆœìœ¼ë¡œ ë§Œì•½ ê°™ìœ¼ë©´ ê·¸ë£¹ ìˆœ<br>ìˆ˜ì—…ë²ˆí˜¸ 11âˆ¼20ë²ˆê¹Œì§€ëŠ” ì´ë¦„ ìˆœê³¼ ë§Œì•½ ê°™ìœ¼ë©´ í•™ë…„ ìˆœ
|| 2 | ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ìœ í˜• ||ìˆ˜ì—…ë²ˆí˜¸ 11âˆ¼20ë²ˆê¹Œì§€ëŠ” ì´ë¦„ ìˆœê³¼ ë§Œì•½ ê°™ìœ¼ë©´ í•™ë…„ ìˆœ<br>ìˆ˜ì—…ë²ˆí˜¸ 21âˆ¼30ë²ˆê¹Œì§€ëŠ” ê·¸ë£¹ ìˆœê³¼ ë§Œì•½ ê°™ìœ¼ë©´ í•™ë…„ ìˆœ
|| 3 | ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ìœ í˜• ||ìˆ˜ì—…ë²ˆí˜¸ 21âˆ¼30ë²ˆê¹Œì§€ëŠ” ê·¸ë£¹ ìˆœê³¼ ë§Œì•½ ê°™ìœ¼ë©´ í•™ë…„ ìˆœ<br>ìˆ˜ì—…ë²ˆí˜¸ 31âˆ¼40ë²ˆê¹Œì§€ëŠ” í•™ì  ìˆœê³¼ ë§Œì•½ ê°™ìœ¼ë©´ í•™ë…„ ìˆœ
|| 4 | ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ìœ í˜• ||ìˆ˜ì—…ë²ˆí˜¸ 31âˆ¼40ë²ˆê¹Œì§€ëŠ” í•™ì  ìˆœê³¼ ë§Œì•½ ê°™ìœ¼ë©´ í•™ë…„ ìˆœ<br>ìˆ˜ì—…ë²ˆí˜¸ 41âˆ¼48ë²ˆê¹Œì§€ëŠ” ë†’ì€ í•™ë…„ ìˆœê³¼ ë§Œì•½ ê°™ìœ¼ë©´ ê·¸ë£¹ ìˆœ

`[ì˜ˆì‹œ] : ìì‹ ì˜ ìœ„ 5, ì•„ë˜ 4 10ê°œì˜ ë°ì´í„°ê°€ 8 ~ 17 ë²”ìœ„ì— í¬í•¨ë  ë•Œ`<br>
* HEAD  = 3<br>
* TAIL  = 7<br>
* TYPE  = 1 <br>
### ë”°ë¼ì„œ `[TYPE 1]` ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ 8~10 ë²ˆ(HEAD 3), 11~17 ë²ˆ(TAIL 7) ì •ë ¬ì´ ê°€ëŠ¥í•¨
</details>

<hr>

### 7. * **ê°œë°œììš©** * ìŠ¤í¬ë¦½íŠ¸ ëª¨ë“ˆ ì„¤ì •
<details>
<summary> View </summary>

```css
[SCRIPT DATA]
MODULES = settings, repo, apm, quota, mail, oracle, messages
```
| í•„ë“œ | ê°’ | ì„¤ëª… |
| :---: | :---: | :---: |
|`MODULES`| settings, repo, apm, quota, mail, oracle, messages| ì‚¬ìš©ì ì •ì˜ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ `./Resource/Scripts/`<br> ê²½ë¡œì— ì €ì¥ í›„ ì¶”ê°€í•˜ì—¬ ìë™ ì—°ê²°

### * <span style="color: #DA4354">ì•ˆì •ì„±ê³¼ í˜¸í™˜ì„±ì„ ìœ„í•˜ì—¬, ê°œë°œì ì„¤ì • ë¶€ë¶„ì„ ìµœëŒ€í•œ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.</span>
</details>
</details>
</details>


<hr>

# ğŸ“ƒ Guide

## ğŸ·ï¸ ëª…ë ¹ì–´ ê°€ì´ë“œ
<details open>
<summary> View </summary>
<hr>

### 1. repo ëª…ë ¹ì–´
<details>
<summary> View </summary>

```css
[root@locahost sm-shell]# ./sm_final.sh repo
```
* repo ëª…ë ¹ ì…ë ¥ ì‹œ ì•„ë˜ì™€ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    - /etc/yum.repo.d ì— ì¡´ì¬í•˜ëŠ” ì˜¨ë¼ì¸ repo ë¥¼ ëª¨ë‘ ì‚­ì œí•˜ê³ , loca.repo ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.
    - ê°€ì¥ ë§ì€ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” `createrepo` ëª…ë ¹ì„ ìˆ˜í–‰í•  í•„ìš”ê°€ ì—†ì–´ `10ì´ˆ` ì´ë‚´ì— ë ˆí¬ê°€ ì„¤ì¹˜ë©ë‹ˆë‹¤.
</details>
<hr>

### 2. rpm ëª…ë ¹ì–´
<details>
<summary> View </summary>

```css
[root@localhost sm-shell]# ./sm_final.sh rpm
-rw-r--r-- 1 root  root  56227  Jun 19  21:27 15-ì´ê°•ì¼-rpm-list.log
```
* ì‹œìŠ¤í…œì— ì¡´ì¬í•˜ëŠ” íŒ¨í‚¤ì§€ ëª©ë¡ì„ $ID-$NAME-rpm-list.log ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
</details>
<hr>

### 3. apm ëª…ë ¹ì–´
<details>
<summary> View </summary>

```css
[root@localhost sm-shell]# ./sm_final.sh apm split
-rw-r--r-- 1 root  root  16589296  Jun 19  21:27 mysql-5.6.24.tar.gz.part-0
-rw-r--r-- 1 root  root  16589296  Jun 19  21:27 mysql-5.6.24.tar.gz.part-1

[root@localhost sm-shell]# ./sm_final.sh apm merge
-rw-r--r-- 1 root  root  33178592  Jun 19  21:27 mysql-5.6.24.tar.gz
```
* split ëª…ë ¹ì–´ë¡œ mysql-5.6.24.tar.gz ì†ŒìŠ¤ ì••ì¶•íŒŒì¼ì„ 2ê°œë¡œ ë¶„í• í•©ë‹ˆë‹¤.
* merge ëª…ë ¹ì–´ë¡œ mysql-5.6.24.tar.gz.part0-1 ë¶„í•  íŒŒì¼ì„ í•˜ë‚˜ë¡œ ë³‘í•©í•©ë‹ˆë‹¤.
<br><br>

```css
[root@localhost sm-shell]# ./sm_final.sh apm install
... # ì„¤ì¹˜ ë° ì••ì¶• í•´ì œ í›„
Enter current password for root (enter for none): (ì—”í„°)
Change the root password? [Y/n] y
New password: (ë¹„ë°€ë²ˆí˜¸ ì…ë ¥)
Re-enter new password: (ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥)
Remove anonymous users? [Y/n] y
Disallow root login remotely? [Y/n] n
Remove test database and access to it? [Y/n] y
Reload privilege tables now? [Y/n] y

```
* apm `install` ëª…ë ¹ ì‚¬ìš© ì‹œ ì•„ë˜ì™€ ê°™ì€ ë™ì‘ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤.
    - Apache(2.4.6) PHP(5.4.16) Mariadb(5.5.68) ë° ì˜ì¡´, ì¢…ì†ì„± íŒ¨í‚¤ì§€ ìë™ ì„¤ì¹˜
    - Web ì†ŒìŠ¤ /var/www/html ì••ì¶• í•´ì œ í›„ ê¶Œí•œ ë¶€ì—¬
    - DB ì—°ê²° í›„ ë³µêµ¬
<br><br>

```css
[root@localhost sm-shell]# ./sm_final.sh apm check
```
* APM ì„œë¹„ìŠ¤ ì˜¤ë¥˜ ìœ ë¬´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
> â„¹ï¸ ì„œë¹„ìŠ¤ ë¹„ì •ìƒ ë™ì‘ ì‹œì—ë§Œ ì˜¤ë¥˜ ë©”ì„¸ì§€ ì¶œë ¥
</details>

<hr>

### 4. quota ëª…ë ¹ì–´
<details>
<summary> View </summary>

```css
[root@localhost ~]# mkdir /quotahome
[root@localhost ~]# fdisk -l
[root@localhost ~]# fdisk /dev/sda

Command (m for help): n
Partition type:
   p   primary (3 primary, 0 extended, 1 free)
   e   extended
Select (default e): p
Partition number (3-4, default 3): 3
First sector (10001-209715, default 10001): 10001
Last sector, +sectors or +size{K,M,G} (10000-209715, default 209715): +1G
Partition 3 of type Linux and of size 1 GiB is set
Command (m for help): w

[root@localhost ~]# partprobe -s
[root@localhost ~]# fdisk -l
[root@localhost ~]# mkfs.ext4 /dev/sda3
[root@localhost ~]# mount /dev/sda3 /quotahome
[root@localhost ~]# cd /quotahome
```
* ìœ„ì™€ ê°™ì´ ì´ˆê¸° íŒŒí‹°ì…˜ ì„¤ì •ì„ í•´ì¤ë‹ˆë‹¤.
* ë³´í†µ ë””ìŠ¤í¬ ì´ë¦„ì€ HDD : `sda`, SSD : `nvme0n1p` ì…ë‹ˆë‹¤.
> â„¹ï¸  `fdisk -l` ëª…ë ¹ìœ¼ë¡œ ì •í™•í•œ íŒŒí‹°ì…˜ì„ ì§€ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

<br><br>

```css
[root@localhost quotahome]# /sm-shell/sm_final.sh quota install
[root@localhost quotahome]# ls -al
.
..
...
drwxr--r-- 1 root  root  33 Jun 19  21:27 csejj
drwxr--r-- 1 root  root  33 Jun 19  21:27 samuel
drwxr--r-- 1 root  root  33 Jun 19  21:27 luikie
drwxr--r-- 1 root  root  0  Jun 19  21:27 lost+found
```
* ì´ˆê¸° íŒŒí‹°ì…˜ ì„¤ì • í›„ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ ì‚¬ìš©ì ë° ê·¸ë£¹ì„ ìë™ êµ¬ì„±í•©ë‹ˆë‹¤.
* `ls-al` ëª…ë ¹ì–´ ì‹¤í–‰ ê²°ê³¼ê°€ ìœ„ì™€ ê°™ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.
* `lost+found` ë””ë ‰í† ë¦¬ëŠ” ext4 íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ í¬ë§·ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
> â„¹ï¸ `lost+found` ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë§ˆìš´íŠ¸ ì¬í™•ì¸

<br>

```css
[root@localhost quotahome]# /sm-shell/sm_final.sh quota set /dev/sda3
[quotaoff] off /dev/sda3
[quotaon] on /dev/sda3
[quota] completed

[root@localhost quotahome]# mount -o remount /dev/sda3
[root@localhost quotahome]# repquota -au
[root@localhost quotahome]# repquota -ag
```
* `repquota -au` ì‚¬ìš©ì quota í™•ì¸ ëª…ë ¹ì–´
* `repquota -ag` ê·¸ë£¹ quota í™•ì¸ ëª…ë ¹ì–´
</details>

<hr>

### 5. sendmail ëª…ë ¹ì–´
<details>
<summary> View </summary>

```css
[root@localhost ~]# /sm-shell/sm_final.sh mail install
```
* `mail install` ëª…ë ¹ì–´ëŠ” sendmail ë° ì˜ì¡´ Â· ì¢…ì† íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
<br><br>

```css
[root@localhost ~]# /sm-shell/sm_final.sh mail send local

[root@localhost ~]# /sm-shell/sm_final.sh mail send global
```
* `mail send local` ëª…ë ¹ì–´ëŠ” root@localhost.localdomain ê³„ì •ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.
* `mail send global` ëª…ë ¹ì–´ëŠ” luikie@luikie.sm.jj.ac.kr ê³„ì •ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.
    * TO ì— ì„¤ì •í•´ë‘” ì£¼ì†Œ<br><br>
* ë¯¸ë¦¬ ì„¤ì •í•´ë‘” ì´ë©”ì¼ ì£¼ì†Œë¡œ `score_result.txt` ì²¨ë¶€ ë©”ì¼ì„ ì†¡ë¶€í•©ë‹ˆë‹¤.
> â„¹ï¸  ë©”ì¼ ì²¨ë¶€ ì–‘ì‹
> > <details><summary>View</summary>
> > attachment="/sm-shell/score_result.txt"<br>
> > echo "From: $domain"<br>
> > echo "To: lki_familiar@naver.com, $domain"<br>
> > echo "Subject: $subject"<br>
> > echo "Content-Type: multipart/mixed; boundary=XYZ"<br>
> > echo ""<br>
> > echo "--XYZ"<br>
> > echo "Content-Type: text/plain; charset=utf-8"<br>
> > echo ""<br>
> > echo "$body"<br>
> > echo "--XYZ"<br>
> > echo "Content-Type: text/plain"<br>
> > echo "Content-Disposition: attachment; filename=\"score-result.txt\""<br>
> > echo ""<br>
> > cat "$attachment"<br>
> > echo "--XYZ--"<br>
> > EOF
</details>

<hr>

### 6. Oracle ëª…ë ¹ì–´
<details>
<summary> View </summary>

---
#### 6-1. oracle install
___
```css
[root@localhost home]# /sm-shell/sm_final.sh oracle install
```
* `oracle install` ëª…ë ¹ ì‚¬ìš© ì‹œ ì•„ë˜ì™€ ê°™ì€ ë™ì‘ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤
    - Oracle 21c Preinstall, EE ì„¤ì¹˜
    - /etc/init.d/oracledb_ORCLCDB-21c configure ëª…ë ¹ìœ¼ë¡œ ì´ˆê¸° DB êµ¬ì¶•
    - oracle ì‚¬ìš©ì dba ê·¸ë£¹ ì¶”ê°€ í›„ ë¹„ë°€ë²ˆí˜¸ wjsansrk ì„¤ì •
    - .bash_profile oracle í™ˆ ë””ë ‰í† ë¦¬ì— ë³µì‚¬
>  â„¹ï¸  ì„¤ì¹˜ ë° ì´ˆê¸° DB êµ¬ì„±ê¹Œì§€ ì•½ 10ë¶„ ì†Œìš”ë©ë‹ˆë‹¤.

<br>

___
#### 6-2. oracle setdb (ìˆ˜ë™ ì„¤ì •)
___
```css
[oracle@localhost home]$ cd ~
[oracle@localhost ~]$ cat .bash_profile | grep "ORACLE_SID"
export ORACLE_SID=ORCLCDB
```
* ëª…ë ¹ì–´ ì…ë ¥ ì‹œ export ORACLE_SID=ORCLCDB ê°€ ì¶œë ¥ë˜ë©´ ì •ìƒì…ë‹ˆë‹¤.
<br><br>

```css
[oracle@localhost ~]$ source .bash_profile
[oracle@localhost ~]$ ora
SQL> shutdown immediate;
SQL> startup mount;
SQL> exit;
```
* source .bash_profile ëª…ë ¹ì–´ë¡œ ì„¤ì •ì„ ì ìš©í•´ì¤ë‹ˆë‹¤.

* ora ëª…ë ¹ì–´ë¡œ db ì ‘ì†í•´ ìœ„ SQL ëª…ë ¹ì–´ 3ê°œë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì…ë ¥í•©ë‹ˆë‹¤.
<br><br>

```css
[oracle@localhost ~]$ nid target=sys dbname=linuxDB
ë¹„ë°€ë²ˆí˜¸ : wjsansrk
... (ìƒëµ)
> [Y/N]: y
...Success (ìƒëµ)
```
* nid ëª…ë ¹ì–´ë¡œ ORCLCDB ì—ì„œ linuxDB ë¡œ DB ëª…ì„ ë³€ê²½í•©ë‹ˆë‹¤.

<details>
    <summary>ì˜¤ë¥˜ ë°œìƒ ì‹œ í•´ê²° ë°©ë²•</summary>

* ORA-01034 oracle avaliable ì˜¤ë¥˜
    - startup mount;
    - select name from v$database;<br><br>

+ ORA-01109 ë°ì´í„°ë² ì´ìŠ¤ ê°œë°© ì˜¤ë¥˜
	- alter database open;<br><br>

+ NID-00106 ì˜¤ë¼í´ ì˜¤ë¥˜ì™€ í•¨ê»˜ DB ë¡œê·¸ì¸ ì‹¤íŒ¨
	- DB ë¡œê·¸ì¸ ì‹¤íŒ¨ ì˜¤ë¥˜ì„. ë¹„ë²ˆ í™•ì¸
	- ì˜¤ë¼í´ startup mount; ê°€ ë˜ì–´ ìˆì§€ ì•Šì•„ ë°œìƒí•¨.<br><br>

+ NID-00121 ë°ì´í„° ë² ì´ìŠ¤ ì˜¤í”ˆ ì˜¤ë¥˜
	- shutdown immediate;<br><br>

+ NID-00135 í™œì„± ìŠ¤ë ˆë“œ ì˜¤ë¥˜
	- alter database open;
	- shutdown immediate;
	- startup mount;<br><br>
<hr>
</details>
<br><br>

```css
[oracle@localhost ~]$ sed -i 's/export ORACLE_SID=ORCLCDB/export ORACLE_SID=linuxDB/g' /home/oracle/.bash_profile
[oracle@localhost ~]$ cat .bash_profile | grep "ORACLE_SID"
export ORACLE_SID=linuxDB
[oracle@localhost ~]$ source .bash_profile
[oracle@localhost ~]$ cp -rf /sm-shell/Resource/Data/initlinuxDB.ora /opt/oracle/dbs
```
* sed ëª…ë ¹ì–´ë¡œ .bash_profile ORACLE_SID ê°’ì„ ORCLCDB -> linuxDB ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
* cat ëª…ë ¹ì–´ë¡œ ë³€ê²½ì´ ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
* ë³€ê²½ì´ ì˜¬ë°”ë¥´ê²Œ ë˜ì—ˆë‹¤ë©´, source ëª…ë ¹ì–´ë¡œ ë³€ê²½ëœ ì„¤ì •ì„ ì ìš©í•©ë‹ˆë‹¤.
* cp -rf ëª…ë ¹ì„ ìˆ˜í–‰í•˜ì—¬ /opt/oracle/dbs ê²½ë¡œì— initlinuxDB.ora ì„ ë³µì‚¬í•©ë‹ˆë‹¤.
<br><br>

```css
[oracle@localhost ~]$ ora
SQL> shutdown immediate;
SQL> startup mount;
SQL> select name from v$database;
SQL> alter database open resetlogs;
SQL> exit;
```
* ora ë¥¼ ì…ë ¥í•´ DB ì ‘ì† í›„ ì•„ë˜ SQL 6ê°œ ëª…ë ¹ì„ ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.
* select name from v$database; ëª…ë ¹ ì…ë ¥ ì‹œ LINUXDB ëª…ì´ ì¶œë ¥ë˜ë©´ DB ëª… ë³€ê²½ ì„±ê³µì…ë‹ˆë‹¤.

<br>

___
#### 6-3. oracle back
___
```css
[oracle@localhost home]$ /sm-shell/sm_final.sh oracle back
```
* `oracle setdb` ëª…ë ¹ ìˆ˜í–‰ í›„ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì´ˆê¸° ìƒíƒœë¡œ ë³µêµ¬í•´ì£¼ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.
<br><br>

___
#### 6-4. oracle sql
___
```css
[oracle@localhost home]$ /sm-shell/sm_final.sh oracle sql
[oracle@localhost home]$ ora
SQL> select * from final_record;
```
* `oracle sql` ëª…ë ¹ ì‚¬ìš© ì‹œ ì•„ë˜ì™€ ê°™ì€ ë™ì‘ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤.
    - sql ì‹¤í–‰í•˜ê³  final_record í…Œì´ë¸” ìƒì„±
    - sqlldr(sql loader) ë¥¼ ì‚¬ìš©í•˜ì—¬ `./Resource/Data/score.txt` ë°ì´í„° ì‚½ì…
* ì‚¬ìš©ì ëª… : sys as sysdba
* ë¹„ë°€ë²ˆí˜¸  : wjsansrk
<br>

___
#### 6-5. oracle sort
___
```css
[oracle@localhost home]$ su
[root@localhost ~]# /sm-shell/sm_final.sh oracle sort
```
* ë¯¸ë¦¬ ì„¤ì •í•´ë‘” ì¡°ê±´ìœ¼ë¡œ `./Resource/Data/score.txt` ë°ì´í„° ì •ë ¬ í›„ `./score_result.txt` íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
<br>

___
#### 6-6. oracle sort
___
```css
[root@localhost ~]# ls -al /sm-shell | grep score*
[root@localhost ~]# /sm-shell/sm_final.sh mail send
```
* `ls -al` ëª…ë ¹ì–´ë¡œ score_result.txt íŒŒì¼ ì¡´ì¬ ìœ ë¬´ í™•ì¸
* `mail send` ëª…ë ¹ì–´ë¡œ ë¯¸ë¦¬ ì„¤ì •í•œ ì´ë©”ì¼ ì£¼ì†Œë¡œ ì²¨ë¶€ ë©”ì¼ ì†¡ë¶€

> â„¹ï¸  `'./Resource/Data/settings.ini'`<br> > TO í•„ë“œì— ì„¤ì •ëœ ì´ë©”ì¼ ì£¼ì†Œë¡œ ì „ì†¡ë©ë‹ˆë‹¤.
</details>

</details>
</details>
<br><hr>

# ğŸ¤— Standardization

## ğŸ“° ì½”ë“œ í‘œì¤€í™”
<details open>
<summary> View </summary>


## 1. Function Renaming (`main`)
<details>
<summary> View </summary>

```bash
# Global _Function > __Function
__Global_Function() {
    ...
} 

# Local _Function > __Function
_Local_Function() {
    ...
} 

```
* ì „ì—­ í•¨ìˆ˜ëŠ” `Underbar(_) 2ê°œ`ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤.
* ì§€ì—­ í•¨ìˆ˜ëŠ” `Underbar(_) 1ê°œ`ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤.
</details>

---

## 2. Exception & Error Handling (`main`)
<details>
<summary> View </summary>

```bash
# Exception $ Error Send
__Function() {
    ... # ì •ìƒ ì¶œë ¥
else # ì˜ˆì™¸ ë° ì˜¤ë¥˜ ë°œìƒ
    # __Handler:í•¨ìˆ˜í˜¸ì¶œ $Function:ì˜¤ë¥˜í•¨ìˆ˜ $date:ë°œìƒì‹œê°„ $Error_Out:ì˜¤ë¥˜ì „ë‹¬"
    __Handler "$Function" "$date" "$Error_Out"
}

# Exception & Error Handler
__Handler() {
    # ì „ë‹¬ ë°›ì€ ì¸ì ì¶œë ¥
    echo -e "$white""$b_red[$2] $1 $3 Error$cls"
}

```
* ì˜¤ë¥˜ ë°œìƒ ê°’ì„ `íŒŒë¼ë¯¸í„°`ë¡œ `ëª…í™•í•˜ê²Œ ì „ë‹¬`í•˜ëŠ” êµ¬ë¬¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
* ì˜ˆì™¸ ë° ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ìœ„í•œ `í•¸ë“¤ë§ í•¨ìˆ˜`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
</details>

---

## 3. High Available (`main`)
<details>
<summary> View </summary>

```bash
# Exception & Error Handler
__Handler() {
    # ì „ë‹¬ ë°›ì€ ì¸ì Error_$date.log Append Logging
    echo "[$2] $1 $3 Error" >> $log_path/Error_"$(date +"%m%d")".log
    echo -e "$white""$b_red[$2] $1 $3 Error$cls"
} 2>> $log_path/Error_"$(date +"%m%d")".log

```
* `2>> ./path/file` Redirection ëª…ë ¹ì¤„ë¡œ `ì„±ê³µ | ì˜¤ë¥˜` í‘œì¤€ ì…ì¶œë ¥ì„ ì§€ì •í•©ë‹ˆë‹¤.
* ì½”ë“œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•˜ì—¬ ê° í•¨ìˆ˜ ë³„ë¡œ í‘œì¤€ ì…ì¶œë ¥ ë° ë™ì‘ ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
    </details> 

</details>

<br><hr>

# ğŸ”– Reference
<details>
<summary> View </summary>

## 1. Reference Link

* [[Bash Style í‘œì¤€í™” ì§€ì¹¨] : ì›ë¬¸ë³¸(English)](https://github.com/icy/bash-coding-style)
    * [[Bash Style í‘œì¤€í™” ì§€ì¹¨] : ë²ˆì—­ë³¸(Korean)](https://sepiros.tistory.com/28)

</details>
